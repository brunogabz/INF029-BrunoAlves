#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define MAX 100

typedef struct
{
	char cor[MAX];
    int chassi;
    int ano;
}Carro;

int main()
{		
	int cont = 0; 
	int sair = 0;
   	Carro carro[MAX];
	while(sair == 0)
	{
		printf("O que deseja fazer:\n");
		printf("0 - Sair\n");
        printf("1 - Cadastrar\n");
        printf("2 - Listar\n");
        printf("3 - Atualizar\n");
        printf("4 - Excluir\n");
		int opcao = -1;
		scanf("%d", &opcao);
		switch(opcao)
		{
			case 0:
			{	
				printf("\nSaindo...\n");
				sair = 1;
				break;
			}
			case 1:
			{
				if(cont < MAX)
				{
					printf("\nCadastrando...\n");
					printf("Qual o chassi do carro? ");
					scanf("%d", &carro[cont].chassi);
					printf("Qual o ano do carro? ");
					scanf("%d", &carro[cont].ano);
					printf("Qual a cor do carro? ");
					int c;
	                while ((c = getchar()) != '\n' && c != EOF);
	                fgets(carro[cont].cor, MAX, stdin);
	                carro[cont].cor[strcspn(carro[cont].cor, "\n")] = '\0';
					printf("\n");
					cont++;
					break;
				}
				else 
				{
                    printf("Limite de carros atingido!\n");
                }
                break;
			}	
			case 2: 
			{
                printf("\nListando...\n");
                for (int i = 0; i < cont; i++)
				{
                	printf("Carro %d - Chassi: %d - Ano: %d - Cor: %s \n", i+1, carro[i].chassi, carro[i].ano, carro[i].cor);
                }
                printf("\n");
                break;
            }
            case 3: 
			{
            	printf("Atualizando...\n");
            	for (int i = 0; i < cont; i++)
				{
                	printf("Carro %d - Chassi: %d - Ano: %d - Cor: %s \n", i+1, carro[i].chassi, carro[i].ano, carro[i].cor);
                }
                printf("\n");
                printf("Digite o número do carro que vc quer atualizar: \n");
                int num;
                scanf("%d", &num);
                if (num >= 1 && num <= cont)
				{
                    printf("Digite o chassi: ");
                    scanf("%d", &carro[num - 1].chassi);
                    printf("Digite o ano: ");
                    scanf("%d", &carro[num - 1].ano);
                    printf("Digite a cor: ");
	                int d;
	                while ((d = getchar()) != '\n' && d != EOF);
	                fgets(carro[num - 1].cor, MAX, stdin);
	                carro[num - 1].cor[strcspn(carro[num - 1].cor, "\n")] = '\0';
                }
				else 
				{
                    printf("Número inválido\n");
                }
                break;
            }
            case 4: 
			{
				printf("Excluindo...\n");
            	for (int i = 0; i < cont; i++)
				{
                	printf("Carro %d - Chassi: %d - Ano: %d - Cor: %s \n", i+1, carro[i].chassi, carro[i].ano, carro[i].cor);
                }
                printf("\n");
                printf("Qual carro deseja excluir?\n");
                int excluido;
                scanf("%d", &excluido);
                if (excluido >= 1 && excluido <= cont)
				{
                	for (int e = excluido-1;e<cont-1;e++)
               		{
                		carro[e] = carro[e+1];
					}
					cont--;
					printf("Excluido!\n");
				}
				else 
				{
                    printf("Número inválido\n");
                }
				break;
            }
		}
		
	}
}
